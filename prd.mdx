# **Project Requirements Document: The Flyingduck-MCP Server** 

The following table outlines the detailed functional requirements of The Flyingduck-MCP server.
          
 
| Requirement ID | Description                                        | User Story                                                                                        | Expected Behavior/Outcome                                                                                                    |
| -------------- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| FR001          | Fetch Repositories                                 | As a user, I want to retrieve all available repositories so I can select the ones I want to scan. | System invokes `flyingduck_fetch_repositories` and returns a list of available repositories with metadata.                   |
| FR002          | Fetch Dependencies for SCA                         | As a user, I want to catalog third-party dependencies before scanning for known vulnerabilities.  | System executes `flyingduck_fetch_dependencies` and extracts all third-party libraries with categorization.                  |
| FR003          | Perform Software Composition Analysis (SCA)        | As a user, I want to identify known vulnerabilities in third-party dependencies.                  | System runs `flyingduck_scan_dependencies` and outputs CVEs, severity, affected packages, and possible fix versions.         |
| FR004          | Perform Static Application Security Testing (SAST) | As a user, I want to scan my source code for common security flaws.                               | System runs `flyingduck_scan_sast` and outputs code-level security issues using configured SAST tool (e.g., Semgrep).        |
| FR005          | Scan for Secrets                                   | As a user, I want to detect hardcoded secrets in my codebase.                                     | System runs `flyingduck_scan_secrets` and reports leaked secrets with context and file locations.                            |
| FR006          | Perform Full Scan                                  | As a user, I want to run all scans (SCA, SAST, Secrets) with a single command.                    | System runs `flyingduck_scan_all` and aggregates outputs from all scan modules.                                              |
| FR007          | Fix Detected Vulnerabilities                       | As a user, I want to automatically apply fixes when possible.                                     | System invokes `flyingduck_fix` to auto-upgrade dependencies or suggest changes (based on scan results).                     |
| FR008          | Clean Temporary Artifacts                          | As a user, I want to clean up temp files generated during the scan.                               | System calls `flyingduck_cleanup` to remove all temp data, caches, and scan artifacts.                                       |
| FR009          | Check Connection/Scan Status                       | As a user, I want to check if the scanner and tools are active and ready.                         | System returns system health, scan queue status, or errors through a status report endpoint or prompt response.              |
| FR010          | Prompt-based Scan Control                          | As a user, I want to select what scan to perform using simple prompts.                            | The system should accept prompt types like `scan sast`, `scan all`, `check status`, and map them to specific scan workflows. |
| FR011          | SBOM Vulnerability Analysis                        | As a user, I want to analyze SBOM files for vulnerabilities.                                      | System should parse SPDX or CycloneDX SBOMs, and check packages against a vulnerability database (e.g., Grype).              |
| FR012          | Cursor IDE Integration                             | As a user, I want the scanner to integrate into Cursor for in-IDE scanning and fix suggestions.   | System should expose CLI interface/hooks usable by Cursor for scan initiation, monitoring, and result rendering.             |

